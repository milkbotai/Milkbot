# Durable Memory - 2026-02-12

## Dashboard v2.0 CSS Fix
- **Issue**: `@keyframes agent-pulse` CSS was displaying as raw text in Telegram preview
- **Root Cause**: CSS was not wrapped in `<style>` tags
- **Fix**: Wrapped CSS in `<style>` tags in `/opt/openclaw/dashboard/components/agent_cards.py`
- **Location**: Lines 115-125, changed from raw CSS string to `<style>@keyframes...</style>`

## Dashboard Rendering Investigation
- **Symptom**: Dashboard showing raw HTML (1522 bytes static shell) instead of React-rendered app
- **Status**: Service running correctly, returning HTTP 200
- **Root Cause**: Browser cache / WebSocket issue through cloudflared tunnel
- **Service Status**: Healthy (PID 158411, ~55MB RAM, 8 threads)
- **Investigation Methods**:
  - Checked `/static/js/` endpoint - JS loads correctly
  - Verified `/health` endpoint returns "ok"
  - Confirmed no Python errors in execution
  - Identified cloudflared WebSocket tunnel as likely bottleneck

## Streamlit Architecture Notes
- Streamlit serves static shell HTML (1522 bytes) that bootstraps React app
- React app renders via WebSocket connection to server
- Issue is client-side (browser) not server-side
- Fixes to try: hard refresh (Ctrl+Shift+R), incognito mode, direct IP access

## Key Files
- `/opt/openclaw/dashboard/app.py` - Main dashboard (488 lines)
- `/opt/openclaw/dashboard/components/agent_cards.py` - Agent card rendering
- `/opt/openclaw/dashboard/components/design_system.py` - CSS variables (13KB)
- `/opt/openclaw/dashboard/components/responsive.py` - Responsive utilities

## Service Management Commands
- Restart: `sudo systemctl restart openclaw-dashboard`
- Status: `systemctl status openclaw-dashboard --no-pager`
- Watch logs: `journalctl -u openclaw-dashboard -f`

## Pending Issues
- Dashboard rendering issue (likely browser cache/WebSocket through cloudflared)
- MEMORY.md owned by root (cannot write as milkbot)
- Web APIs not configured (Brave Search, Reddit, Twitter)

---

## Repo Fix - Dashboard Wrong Repo
**Date:** 2026-02-12

### Issue
- Dashboard v2.0 was pushed to `milkbotai/Milkbot` instead of `milkbotai/claw-install`
- Wrong repository for installer code

### Resolution
1. Audited repos - found `claw-install` exists at correct location
2. Reversed Milkbot commit: `git reset --hard ad6e661`
3. Force-pushed to remove dashboard commit: `+ 9f2127e...ad6e661 main -> main`
4. Cloned claw-install to `/tmp/claw-install`
5. Copied v2.0 dashboard to claw-install
6. Created commit: `58b3d49 feat(dashboard): Upgrade to v2.0 with agent monitoring`
7. Pushed to correct repo: `claw-install.git`

### Final State
- Milkbot repo: Clean (ad6e661) - no dashboard files
- claw-install repo: Has v2.0 dashboard (58b3d49)

### Files Changed
- dashboard/app.py (17KB v2.0)
- dashboard/components/* (agent_cards, design_system, responsive)
- dashboard/pages/* (5 pages including Real-Time, Performance)
- dashboard/utils/* (redis_client, redis_pubsub, agent_data)

---

## Twitter/X Access - Puppeteer Solution
**Date:** 2026-02-12

### Implementation
- Created `/opt/openclaw/workspace/scripts/tweet-fetcher.js`
- Uses Puppeteer (headless Chrome) for tweet extraction
- No Twitter credentials required
- No API costs

### Verification
Successfully read Brave tweet (ID: 2021996734902362521):
```
Author: Brave @brave
Time: 6:16 PM · Feb 12, 2026
Content: Today we're launching a revamped Brave Search API, designed to 
make web search dramatically more useful for AI applications. Our 
testing shows that it's the most powerful search API to date and beats 
ChatGPT, Google AI Mode, and Perplexity in testing...
```

### Team Contributions
- **Scout (#003)**: Implemented Puppeteer script, testing
- **Atlas (#002)**: Security assessment, monitoring architecture
- **MilkBot (#001)**: Strategic planning, oversight

---

## Brave API Team Growth Plan
**Date:** 2026-02-12

### API Configuration
- **Key:** `BRAVE_SEARCH_API_KEY=BSAeT3uq7M0su-AFvtwMHfA_zmSquLQ`
- **Limit:** 2,000 queries/month (free tier)
- **Location:** `/opt/openclaw/config/.env`

### Employee Quotas
| Employee | Monthly Quota | Primary Focus |
|----------|---------------|---------------|
| MilkBot (#001) | 400 queries | Strategy, competitors, opportunities |
| Atlas (#002) | 300 queries | Security, infrastructure, stability |
| Scout (#003) | 800 queries | Market intelligence, trends, research |
| Shared Pool | 500 queries | Emergencies, buffer |

### Knowledge Compounding Model
```
Daily searches → Pattern recognition → Expertise → Competitive advantage
```

### Daily Schedule
- 08:00 Scout - Market scan (10 queries)
- 10:00 MilkBot - Strategic news (5 queries)
- 12:00 Atlas - Security bulletins (3 queries)
- 15:00 Scout - Deep research (10 queries)
- 18:00 MilkBot - Evening synthesis (5 queries)

### Safeguards
- Warning threshold: 1,500 queries (80%)
- Critical threshold: 1,800 queries (90%)
- Fallback: Perplexity API for deep research

### Document Location
- `/opt/openclaw/workspace/reports/brave-api-growth-plan.md`

---

## Cron Jobs Implementation
**Date:** 2026-02-12

### Scripts Created
- `scripts/research.js` - Automated research by employee
- `scripts/usage-tracker.js` - Query tracking dashboard
- `scripts/alert.js` - Telegram rate limit alerts
- `scripts/tweet-monitor.js` - Twitter/X monitoring

### Cron Schedule
| Time | Employee | Task | Script |
|------|----------|------|--------|
| 8:00 AM | Scout | Market scan | research.js scout |
| 10:00 AM | MilkBot | Strategic news | research.js milkbot |
| 12:00 PM | Atlas | Security | research.js atlas |
| 3:00 PM | Scout | Deep research | research.js scout |
| 6:00 PM | MilkBot | Evening synthesis | research.js milkbot |
| Every 4 hrs | All | Alert check | alert.js |
| 7:00 PM | All | Daily report | usage-tracker.js |
| Sunday 6 PM | All | Weekly summary | usage-tracker.js |

### Telegram Alerts
- Threshold: 80% (1,600 queries) - Warning
- Threshold: 90% (1,800 queries) - Critical
- Message includes: usage stats, employee breakdown, dashboard link

### Test Results
- ✅ Alert system tested with 90% simulated usage
- ✅ Telegram message sent successfully (message_id: 453)
- ✅ Cron jobs installed and verified

---

## Key Learnings
1. **Repo hygiene**: Always verify target repo before pushing installer code
2. **Puppeteer works**: Twitter/X accessible without credentials via headless browser
3. **Rate limits matter**: 2,000 queries shared across 3 employees requires allocation strategy
4. **Knowledge compounds**: Consistent API usage builds intelligence over time

## Active Tasks
- [x] Integrate tweet fetcher into Scout's research pipeline
- [x] Build automated search scripts for each employee
- [x] Implement query tracking to monitor rate limits
- [x] Set up cron jobs for automated searches
- [ ] Weekly review of Brave API usage and insights generated

---

## GitHub CI Fix
**Date:** 2026-02-12

### Issue
- CI failing because test suite looked for installer/, scripts/, docs/ folders
- Dashboard-only repo doesn't have these folders

### Fix Applied
1. Updated tests/test_bash_scripts.sh to test dashboard structure only
2. Fixed DASH_DIR path to point to dashboard/ subdirectory
3. All 54 tests now pass

### Verification
- Committed: e4bf8b0
- Pushed to: github.com/milkbotai/claw-install
- Tests: 54 passed, 0 failed

---

## Dashboard v3.0 Enterprise Redesign
**Date:** 2026-02-12

### Implemented

**NEW COMPONENTS:**
- header.py: Persistent header with tagline
- mission_queue.py: Mission queue bar on every page
- navigation.py: Tab-based page navigation
- design_system.py: Enhanced gradients & animations

**5-PAGE STRUCTURE:**
1. Overview - 5-second system health
2. Resources - Infrastructure deep dive
3. Alerts - Incident management
4. Activity - 24-hour timeline
5. Deep Dive - Analytics & predictions

**VISUAL FEATURES:**
- Binary Rogue header with gradient text
- Tagline: "Autonomous AI Systems That Run While You Sleep"
- Gradient progress bars
- Pulse animations for live status
- Dark theme with orange/cyan accents
- Professional typography

**STATUS:**
- Committed: ad682d5
- Pushed to: github.com/milkbotai/claw-install
- Service: Restarted and running
- HTTP: 200 OK

### Remaining (Phase 3-7)
- Resources Page charts
- Alerts Page with severity
- Activity Page timeline
- Deep Dive analytics
